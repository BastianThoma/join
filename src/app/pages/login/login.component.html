<div class="login-container">
  <div class="logo-anim-container" [ngClass]="{ 'logo-anim-active': logoAnimActive }">
    <img src="assets/img/join_logo_white.png" alt="Join Logo White" class="logo logo-white" [class.logo-fadeout]="logoAnimActive" />
    <img src="assets/img/join_logo_blue.png" alt="Join Logo Blue" class="logo logo-blue" [class.logo-move]="logoAnimActive" [class.logo-hidden]="hideLogo" />
  </div>
  <div class="login-card">
    <h1 class="title">Log in</h1>
    <div class="login-divider"></div>
    <form class="login-form" #loginForm="ngForm">
      <div class="input-wrapper">
        <input
          type="email"
          placeholder="Email"
          class="input"
          [(ngModel)]="email"
          name="email"
          autocomplete="username"
          required
          email
          #emailInput="ngModel"
        />
        <span class="input-icon">
          <img src="assets/img/mail_icon.png" alt="Mail Icon" />
        </span>
      </div>
      <div class="input-wrapper">
        <input
          [type]="showPassword ? 'text' : 'password'"
          placeholder="Password"
          class="input"
          [(ngModel)]="password"
          name="password"
          autocomplete="current-password"
          required
          #passwordInput="ngModel"
        />
        <span class="input-icon">
          <img *ngIf="!password" src="assets/img/lock_icon.png" alt="Lock Icon" style="pointer-events: none; user-select: none;" />
          <button *ngIf="password && !showPassword" type="button" (click)="togglePasswordVisibility()" tabindex="-1" style="background: none; border: none; padding: 0; margin: 0; cursor: pointer;">
            <img src="assets/img/visibility_off_icon.png" alt="Passwort versteckt" />
          </button>
          <button *ngIf="password && showPassword" type="button" (click)="togglePasswordVisibility()" tabindex="-1" style="background: none; border: none; padding: 0; margin: 0; cursor: pointer;">
            <img src="assets/img/visibility_icon.png" alt="Passwort sichtbar" />
          </button>
        </span>
      </div>
      <div *ngIf="(emailInput.errors?.['required'] || emailInput.errors?.['email']) && emailInput.touched" style="color: #e74c3c; margin-bottom: 8px;">
        <ng-container *ngIf="emailInput.errors?.['required']">Bitte gib deine E-Mail-Adresse ein.</ng-container>
        <ng-container *ngIf="emailInput.errors?.['email']">Bitte gib eine gültige E-Mail-Adresse ein.</ng-container>
      </div>
      <div *ngIf="errorMessage" style="color: #e74c3c; margin-bottom: 8px;">{{ errorMessage }}</div>
      <button type="submit" class="login-btn" (click)="$event.preventDefault(); login();">Log in</button>
      <button class="guest-btn" type="button">Guest Log in</button>
    </form>
  </div>
  <div class="register-link-container">
    <p>Not a join user?</p> <a class="register-link" routerLink="/register">Sign up</a>
  </div>
  <div class="legal-container">
    <a href="#" class="privacy-link">Privacy Policy</a>
    <span class="divider-dot">•</span>
    <a href="#" class="legal-link">Legal Notice</a>
  </div>
</div>
